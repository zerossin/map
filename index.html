<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>SAVER MAP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="neif.ico">

    <!-- OpenLayers CSS -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css"
        integrity="sha256-jckPZk66EJrEBQXnJ5QC2bD+GxWPDRVVoMGr5vrMZvM=" crossorigin="anonymous">

    <!-- 사용자 정의 CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- 아이콘 -->
    <script src="https://kit.fontawesome.com/dbb41a74f1.js" crossorigin="anonymous"></script>
</head>

<body>
    <header>
        <div>
            <img src="images/menu.png" alt="메뉴" id="menuBtn">
            <div id="title">세이버맵</div>
        </div>
        <!-- 검색창과 결과를 감싸는 래퍼 -->
        <div class="search-container">
            <input type="text" id="search-window" name="q" placeholder="장소, 좌표 검색">
            <!-- 검색 결과를 표시할 컨테이너 -->
            <div id="search-results"></div>
        </div>
    </header>

    <div id="map"></div>

    <!-- 세부 정보 -->
    <div id="detail-window" class="small">
        <!-- 작은 창 내용 -->
        <div class="detail-content">
            <div class="detail-text">
                <h2 id="detail-title"></h2>
                <div class="detail-rating">
                    <span id="detail-rating-stars"></span>
                    방문자 리뷰 <a id="detail-review-count"></a>
                </div>
                <p>
                    <div id="detail-address"></div>
                    <div id="detail-subway-info"></div>
                </p>
            </div>
            <div class="detail-image">
                <img id="detail-photo" src="" alt="">
            </div>
        </div>
        <!-- 확장된 창에서만 보이는 내용 -->
        <div class="detail-extra">
            <!-- 구분선 -->
            <div class="section-divider"></div>
            
            <!-- 설명 섹션 -->
            <div class="detail-section detail-info-section">
                <h3>설명</h3>
                <div class="detail-info">
                    <p id="detail-info-text"></p>
                </div>
            </div>
            
            <!-- 구분선 -->
            <div class="section-divider"></div>
            
            <!-- 리뷰 섹션 -->
            <div class="detail-section detail-review-section">
                <h3>리뷰</h3>
                <ul id="detail-reviews">
                    <!-- 리뷰 항목이 여기에 추가됩니다 -->
                </ul>
            </div>
            
            <!-- 구분선 -->
            <div class="section-divider"></div>
            
            <!-- 리뷰 작성 섹션 -->
            <div class="detail-section detail-review-form-section">
                <h3>리뷰 작성</h3>
                <form id="review-form">
                    <div class="star-rating-container">
                        <div class="star-rating">
                            <input type="radio" id="star5" name="rating" value="5">
                            <label for="star5">★</label>
                            <input type="radio" id="star4" name="rating" value="4">
                            <label for="star4">★</label>
                            <input type="radio" id="star3" name="rating" value="3">
                            <label for="star3">★</label>
                            <input type="radio" id="star2" name="rating" value="2">
                            <label for="star2">★</label>
                            <input type="radio" id="star1" name="rating" value="1">
                            <label for="star1">★</label>
                        </div>
                        <span id="selected-rating">0점</span>
                    </div>
                    <textarea name="comment" placeholder="리뷰를 작성해주세요." required></textarea>
                    <button type="submit">등록</button>
                </form>
            </div>
        </div>
        <button id="detail-close-button">×</button>
    </div>



    <!-- 보조메뉴 -->
    <div class="sub-menu" id="subMenu" style="display: none;">
        <!-- 사용자 프로필 -->
        <div class="menu-profile">
            <div class="profile-image">
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <circle cx="30" cy="30" r="30" fill="#E0E0E0"/>
                    <circle cx="30" cy="22" r="10" fill="white"/>
                    <path d="M 10 50 Q 10 35 30 35 Q 50 35 50 50" fill="white"/>
                </svg>
            </div>
            <div class="profile-name">익명 <span class="profile-ip" id="userIP"></span></div>
        </div>

        <!-- 구분선 -->
        <div class="menu-divider"></div>

        <!-- 메뉴 옵션 -->
        <div class="menu-options">
            <button class="menu-button" id="menu-profile">프로필 설정</button>
            <button class="menu-button" id="menu-notice">공지사항</button>
            <button class="menu-button" id="menu-suggest">정보 제안</button>
        </div>

        <!-- 구분선 -->
        <div class="menu-divider"></div>

        <!-- 맵 정보 -->
        <div class="menu-map-info">
            <div class="map-update-label">맵 최신화</div>
            <div class="map-update-date">시점: 2025년 10월 20일</div>
            <button class="menu-update-button" id="menu-update">갱신하기</button>
        </div>

        <!-- 구분선 -->
        <div class="menu-divider"></div>

        <!-- 소셜 링크 -->
        <div id="iconBox">
            <ul class="no_dot">
                <li><a href="https://github.com/zerossin/map" class="icon fa-brands fa-github" target="_blank"></a>
                </li>
                <li><a href="https://zerossin.com/" class="icon fa-solid fa-house" target="_blank"></a></li>
                <li><a href="admin.html" class="icon fa-solid fa-user-shield" target="_blank" title="관리자 페이지"></a></li>
            </ul>
        </div>
    </div>

    <!-- 다크오버레이 -->
    <div class="dark-overlay" id="overlay"></div>

    <!-- 위치 선택 모드 오버레이 -->
    <div class="location-select-overlay" id="locationSelectOverlay" style="display: none;">
        <div class="location-select-hint">📍 맵을 클릭하여 위치를 선택하세요</div>
    </div>

    <!-- 프로필 설정 모달 -->
    <div class="profile-modal" id="profileModal" style="display: none;">
        <div class="profile-modal-content">
            <div class="profile-modal-header">
                <h3>프로필 설정</h3>
                <button class="profile-modal-close" id="profileModalClose">&times;</button>
            </div>
            <div class="profile-modal-body">
                <!-- 프로필 이미지 -->
                <div class="profile-image-section">
                    <div class="profile-preview" id="profilePreview">
                        <svg width="80" height="80" viewBox="0 0 60 60">
                            <circle cx="30" cy="30" r="30" fill="#E0E0E0"/>
                            <circle cx="30" cy="22" r="10" fill="white"/>
                            <path d="M 10 50 Q 10 35 30 35 Q 50 35 50 50" fill="white"/>
                        </svg>
                    </div>
                    <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                    <button class="profile-image-button" id="profileImageButton">이미지 변경</button>
                    <button class="profile-image-reset" id="profileImageReset">기본 이미지로</button>
                </div>
                
                <!-- 닉네임 입력 -->
                <div class="profile-nickname-section">
                    <label for="nicknameInput">닉네임</label>
                    <input type="text" id="nicknameInput" placeholder="닉네임을 입력하세요" maxlength="20">
                    <div class="nickname-help">최대 20자까지 입력 가능합니다.</div>
                </div>
                
                <!-- 저장 버튼 -->
                <button class="profile-save-button" id="profileSaveButton">저장</button>
            </div>
        </div>
    </div>

    <!-- 정보 제안 모달 -->
    <div class="suggest-modal" id="suggestModal" style="display: none;">
        <div class="suggest-modal-content">
            <div class="suggest-modal-header">
                <h3>정보 제안</h3>
                <button class="suggest-modal-close" id="suggestModalClose">&times;</button>
            </div>
            <div class="suggest-modal-body">
                <!-- 제안 타입 선택 -->
                <div class="suggest-type-section" id="suggestTypeSection">
                    <button class="suggest-type-button" data-type="add">
                        <div class="suggest-icon">📍</div>
                        <div class="suggest-title">맵 내 정보 추가</div>
                        <div class="suggest-desc">새로운 장소 정보를 추가합니다</div>
                    </button>
                    <button class="suggest-type-button" data-type="edit">
                        <div class="suggest-icon">✏️</div>
                        <div class="suggest-title">정보 수정</div>
                        <div class="suggest-desc">기존 정보를 수정 제안합니다</div>
                    </button>
                    <button class="suggest-type-button" data-type="feedback">
                        <div class="suggest-icon">💡</div>
                        <div class="suggest-title">건의사항</div>
                        <div class="suggest-desc">기타 의견을 남깁니다</div>
                    </button>
                </div>

                <!-- 제안 폼 -->
                <div class="suggest-form-section" id="suggestFormSection" style="display: none;">
                    <button class="suggest-back-button" id="suggestBackButton">← 뒤로</button>
                    
                    <form id="suggestForm">
                        <div class="suggest-form-group">
                            <label id="suggestFormTitle">제목</label>
                            <input type="text" id="suggestTitle" placeholder="제목을 입력하세요" required maxlength="100">
                        </div>
                        
                        <div class="suggest-form-group" id="suggestLocationGroup" style="display: none;">
                            <label>위치 (좌표)</label>
                            <input type="text" id="suggestCoords" placeholder="맵에서 클릭하여 선택" readonly>
                            <button type="button" class="suggest-select-location" id="suggestSelectLocation">맵에서 위치 선택</button>
                        </div>
                        
                        <div class="suggest-form-group">
                            <label>내용</label>
                            <textarea id="suggestContent" placeholder="상세 내용을 입력하세요" required rows="6"></textarea>
                        </div>
                        
                        <button type="submit" class="suggest-submit-button">제출하기</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 외부 스크립트 -->
    <!-- OpenLayers JS -->
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"
        integrity="sha256-77dogUPZ1WVoK9BDF0CxsKnAouX3YzK6n4tIcbDgtFI=" crossorigin="anonymous"></script>

    <!-- Map metadata generated by uNmINeD -->
    <script src="unmined.map.properties.js"></script>
    <script src="unmined.map.regions.js"></script>
    <script src="unmined.map.players.js"></script>

    <!-- 사용자 정의 마커 -->
    <script src="custom.markers.js"></script>

    <!-- uNmINeD JS -->
    <script src="saver.openlayers.js"></script>

    <!-- 사용자 정의 JS -->
    <script src="main.js"></script>
</body>

</html>
